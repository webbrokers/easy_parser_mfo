# Парсер витрин вебмастеров и# Парсер витрин МФО (v1.0)

Система для ежедневного мониторинга позиций офферов с админ-панелью и аналитикой.

## Функции

- **Точный парсинг (Cluster Match v5.0)**: Умный поиск офферов с поддержкой множества партнерских сетей (Leadgid, Leads, и др.).
- **Версионность парсера (NEW)**: Поддержка **v1.0 (Legacy)** и **v2.0 (Stable Match)**. Версия 2.0 включает глубокое сопоставление по алиасам и поиск в URL/атрибутах.
- **Matching Engine v2.0**: Автоматическое объединение дублей компаний ('Zaymer', 'Робот Займер') в единый бренд. Поддержка 80+ брендов.
- **Стабильные скриншоты**: Принудительный Desktop-режим и проверка на "Not Found" перед снимком.
- **Аналитика**: Расчет средней позиции и популярности брендов.
- **Асинхронный парсинг (NEW)**: Параллельный запуск до 2 витрин одновременно для ускорения работы без перегрузки сервера.
- **Управление данными**: Возможность генерации тестовых данных и их раздельного удаления (без потери реальных результатов парсинга).

## Деплой (Railway.app)

1. Сделайте `git push`.
2. Добавьте `TELEGRAM_BOT_TOKEN` и `TELEGRAM_CHAT_ID` в переменные (если нужно).
3. Приложение само создаст базу и наполнит её сайтами при первом запуске.

## Результаты исследования (2026-02-04)

- На сайте `brobank.ru` найден sitemap с МФО: `https://brobank.ru/wp-sitemap-posts-zayms-1.xml`.
- Извлечено 156 уникальных организаций.
- Основной паттерн URL: `https://brobank.ru/zaym-[slug]/`.
- **Исследование зависаний терминала**: Основные причины — отсутствие флага `-y` в командах (ожидание ввода) и лимиты токенов в чате. Подробности в `walkthrough.md`.
