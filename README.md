# Парсер витрин МФО (v1.6.0)

Система для ежедневного мониторинга позиций офферов с админ-панелью и аналитикой.

## Функции

- **Точный парсинг (Pattern Match v3.0)**: Многослойный анализ (JSON, Яндекс.Метрика, Редиректы). Самая мощная версия для сложных сайтов.
- **Версионность парсера (NEW)**: Поддержка **Pattern Match v3.0**, **Stable Match v5.6** и **Legacy v4.0**.
- **Детекция неизвестных брендов (NEW)**: Автоматический сбор и вывод нераспознанных компаний для расширения базы.
- **Matching Engine v2.0**: Автоматическое объединение дублей компаний ('Zaymer', 'Робот Займер') в единый бренд. Поддержка 80+ брендов.
- **Стабильные скриншоты**: Принудительный Desktop-режим и проверка на "Not Found" перед снимком.
- **Аналитика**: Расчет средней позиции и популярности брендов.
- **Асинхронный парсинг (NEW)**: Параллельный запуск до 2 витрин одновременно для ускорения работы без перегрузки сервера.
- **Управление данными**: Возможность генерации тестовых данных и их раздельного удаления (без потери реальных результатов парсинга).

## Деплой (Railway.app)

1. Сделайте `git push`.
2. Добавьте `TELEGRAM_BOT_TOKEN` и `TELEGRAM_CHAT_ID` в переменные (если нужно).
3. Приложение само создаст базу и наполнит её сайтами при первом запуске.

## Результаты исследования (2026-02-04)

- На сайте `brobank.ru` найден sitemap с МФО: `https://brobank.ru/wp-sitemap-posts-zayms-1.xml`.
- Извлечено 156 уникальных организаций.
- Основной паттерн URL: `https://brobank.ru/zaym-[slug]/`.
- **Исследование зависаний терминала**: Основные причины — отсутствие флага `-y` в командах (ожидание ввода) и лимиты токенов в чате. Подробности в `walkthrough.md`.
